<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4" 
data-page="detalhe-servidor">
<head th:replace="modulos/fragments :: head"></head>
<body class="hold-transition skin-blue sidebar-mini fixed">
	<div class="wrapper">
		<div th:replace="modulos/fragments :: header"></div>
		<div th:replace="modulos/fragments :: menu"></div>

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Main content -->
			<section class="content">
				<div class="box box-primary">
					<div class="box-header with-border">
							<h3 class="box-title">Buscar Servidor</h3>
					</div>
					
					<div class="box-body">
						<form th:action="@{/buscar/servidor}" role="form" method="get">
							<div class="form-group">
								<label class="control-label">Servidor:</label>
								<select id="select-servidor" name="servidor" class="form-control" required="required">
									<option value="">A Selecionar...</option>
									<option th:each="servidor : ${servidores}" th:value="${servidor.id}" th:text="${servidor.pessoa.nome}"></option>
								</select>
							</div>
							<div>
								<button type="submit" class="btn btn-success btn-flat pull-right">Buscar</button>
							</div>
						</form>
					
						<div th:if="${not #strings.isEmpty(servidor)}">
							<div class="box-header with-border">
								<h3 class="box-title"> Detalhes do Servidor</h3>
							</div>
							<div class="box-body with-border">
								<div class="col-sm-3">
									<label>Nome:</label>
									<div>
										<p th:text="${servidor.pessoa.nome}"></p>
									</div>
								</div>
								<div class="col-sm-3">
									<label>Siape:</label>
									<div>
										<p th:text="${servidor.siape}"></p>
									</div>
								</div>
								<div class="col-sm-3">
									<label>Funcão:</label>
									<div>
										<p th:text="${servidor.funcao.descricao}"></p>
									</div>
								</div>
								<div class="col-sm-3">
									<label>Dedicação:</label>
									<div>
										<p th:text="${servidor.dedicacao.descricao}"></p>
									</div>
								</div>
							</div>
							<div class="box-header with-border">
								<h4 class="box-title"> Participações em ações de extensão</h4>
							</div>
							<div class="col-md-12 table-responsive">
								<table id="table-participacoes" class="table table-striped table-bordered">
									<thead>
										<tr>
											<th>Ação de Extensão</th>
											<th>Estado</th>
											<th>Coordenador</th>
											<th>Carga Horária</th>
											<th>Período</th>
										</tr>
									</thead>
									<tbody>
										<tr th:if="${not participacoes.empty}" th:each="participacao : ${participacoes}">
											<td><a th:href="|@{/detalhes/}${participacao.acaoExtensao.id}|" th:text="${participacao.acaoExtensao.titulo}"></a></td>
											<td><label th:text="${participacao.acaoExtensao.ativo} ? 'EM ANDAMENTO': 'ENCERRADA'" th:class="${participacao.acaoExtensao.ativo} ? 'label label-primary' : 'label label-danger'"></label></td>
											<td><label th:text="${participacao.coordenador} ? 'Sim': 'Não'" th:class="${participacao.coordenador} ? 'label label-success' : 'label label-primary'"></label></td>
											<td th:text="|${participacao.cargaHoraria} Horas|"></td>
											<td th:text="${#dates.format(participacao.dataInicio, 'dd/MM/yyyy')} + ' a ' + ${#dates.format(participacao.dataTermino, 'dd/MM/yyyy')}"></td>
										</tr>
										<tr th:if="${participacoes.empty}">
											<td colspan="5">Nenhuma participação encontrada</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
		<footer th:replace="modulos/fragments :: footer"></footer>
	</div>
</body>
</html>