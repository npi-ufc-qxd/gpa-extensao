<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head th:replace="modulos/fragments :: head"></head>

<body class="hold-transition skin-blue sidebar-mini fixed">
	<div class="wrapper">
		<div th:replace="modulos/fragments :: header"></div>
		<div th:replace="modulos/fragments :: menu"></div>
		
		<div class="content-wrapper">
			<section class="content">
				<div class="box box-primary">
					<div class="box-header with-border">
						<h3 class="box-title">Cadastro retroativo de ação de extensão</h3>
					</div>
					
					<form th:action="@{/admin/cadastrar}" role="form" enctype="multipart/form-data" th:object="${acaoExtensao}" method="post">
						<div class="box-body">
							<div class="callout callout-danger" th:if="${message}">
				                <h4>Atenção</h4>
				                <p th:text="${message}"></p>
           					</div>
						
							<div th:if="${possiveisCoordenadores}" class="form-group form-item">
								<label class="control-label" for="coordenador">* Coordenador:</label>
								<select id="select-coordenador-acao" class="form-control" th:field="${acaoExtensao.coordenador}" name="coordenador" required="required">
									<option th:each="servidor : ${possiveisCoordenadores}" th:value="${servidor.pessoa}" th:text="${servidor.pessoa.nome}" th:attr="data-dedicacao = ${servidor.dedicacao}"></option>
								</select>
							</div>
							
							<div class="form-group">
								<div class="form-item"> 
									<label class="control-label" for="titulo">* Título:</label>
									<input class="form-control" type="text" name="titulo" th:field="${acaoExtensao.titulo}" required="required"/>
								</div>
							</div>
							
							<div class="form-group">
								<div class="form-item">
									<label class="control-label" for="resumo">* Resumo:</label>
									<textarea class="form-control" name="resumo" th:field="${acaoExtensao.resumo}" required="required"></textarea>
								</div>
							</div>
							
							<div class="form-group row">
								<div class="form-item col-lg-4">
									<label class="control-label" for="modalidade">* Modalidade:</label>
									<select id="select-modalidade-acao" class="form-control" th:field="${acaoExtensao.modalidade}" name="modalidade" required="required">
										<option th:each="modalidade : ${modalidades}" th:value="${modalidade}" th:text="${modalidade.descricao}"></option>
									</select>
								</div>
							
								<div class="form-item col-lg-4">
									<label class="control-label" for="cargaHoraria">* Carga horária semanal (hrs) do coordenador:</label>
									<input id="carga-horaria-coordenador" type="number" class="form-control" name="cargaHoraria" required="required" />
								</div>
								
								<div class="form-item col-lg-4">
									<label class="control-label" for="numeroBolsas">* Número de bolsas:</label>
									<input type="number" class="form-control" th:field="${acaoExtensao.bolsasSolicitadas}" required="required" min="0" />
								</div>
							</div>
							
							<div id="cargas-horarias-acao" class="form-group row" style="display: none;">
								<div class="form-item col-lg-6">
									<label class="control-label" for="horasPraticas">* Carga horária prática:</label>
									<input th:field="${acaoExtensao.horasPraticas}" name="horasPraticas" type="number" min="0" class="form-control" />
								</div>
								
								<div class="form-item col-lg-6">
									<label class="control-label" for="horasTeoricas">* Carga horária teórica:</label>
									<input th:field="${acaoExtensao.horasTeoricas}" name="horasTeoricas" type="number" min="0" class="form-control" />
								</div>
							</div>
							
							<div class="form-group">
								<div id="ementa-acao" class="form-item" style="display: none;">
									<label class="control-label" for="ementa">* Ementa:</label>
									<textarea id="textarea-ementa-acao" class="form-control" th:field="${acaoExtensao.ementa}" name="ementa" placeholder="Escreva o conteúdo programático/ementa..."></textarea>
								</div>
								
								<div id="programacao-acao" class="form-item" style="display: none;">
									<label class="control-label" for="programacao">* Programação:</label>
									<textarea id="textarea-programacao-acao" class="form-control" th:field="${acaoExtensao.programacao}" name="programacao" placeholder="Escreva a programação..."></textarea>
								</div>
							</div>
							
							<div class="form-group row">
								<div class="form-item col-lg-4">
									<label class="control-label" for="dataInicio">* Data de início:</label>
									<input type="date" class="form-control date" name="dataInicio" th:field="${acaoExtensao.inicio}" required="required" autocomplete="off" />
								</div>
								<div class="form-item col-lg-4">
									<label class="control-label" for="dataTermino">* Data de término:</label>
									<input type="date" class="form-control date" name="dataTermino" th:field="${acaoExtensao.termino}" required="required" autocomplete="off" />
								</div>
								<div class="form-item col-lg-4">
									<label class="control-label" for="prorrogavel">* Prorrogável?</label>
									<select class="form-control" name="prorrogavel" th:field="${acaoExtensao.prorrogavel}">
										<option th:value="true">SIM</option>
										<option th:value="false">NÃO</option>
									</select>
								</div>
							</div>
							
							<div class="form-group form-item">
								<label class="control-label" for="vinculo">* Vínculo com programa de extensão:</label>
								<select class="form-control" name="vinculo" th:field="${acaoExtensao.vinculo}">
									<option value="">Selecione...</option>
                                    <option th:each="vinculo : ${acoesParaVinculo}" th:value="${vinculo.id}" th:text="${vinculo.titulo}"></option>
								</select>
							</div>
							
							<div class="form-group form-item">
								<label class="control-label" for="anexoAcao">* Anexo:</label>
								<input id="anexo-acao" th:if="${acaoExtensao.anexo} == null" name="anexoAcao" class="file" type="file"/>
								<div th:if="${acaoExtensao.anexo} != null">
									<a th:text="${acaoExtensao.anexo.nome}" th:href="@{/documento/download/} + ${acaoExtensao.anexo.id}"></a>
									<input id="submeter-anexoAcaoExtensao" th:field="${acaoExtensao.anexo}" type="hidden"/>
									<a id="excluirArquivo" class="btn btn-danger btn-xs" data-toogle="tooltip" title="excluir arquivo">
										<i class="fa fa-trash-o"></i>
									</a>
								</div>
							</div>
						</div>
						
						<div class="box-footer with-border">
							<button type="submit" class="btn btn-primary btn-flat pull-right">Salvar</button>
						</div>
					</form>
				</div>
			</section>
		</div>
		
		<footer th:replace="modulos/fragments :: footer"></footer>
	</div>
</body>
</html>