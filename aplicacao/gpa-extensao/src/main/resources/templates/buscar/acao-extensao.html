<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" data-page="buscar-acao">
	
<head th:replace="modulos/fragments :: head"></head>

<body class="hold-transition skin-blue sidebar-mini fixed">
	<div class="wrapper">
		
		<header th:replace="modulos/fragments :: header"></header>
		<aside th:replace="modulos/fragments :: menu"></aside>

		<div class="content-wrapper">
			<section class="content-header">
			</section>
			<section class="content">
					<div class="box box-primary">
						<div class="box-header with-border">
							<h3 class="box-title">Buscar Ações de Extensão</h3>
						</div>
						<div class="box-body">
							<form th:action="@{/buscar/acao-extensao}" role="form" method="get">
								<div class="form-group col-sm-5">
									<label class="control-label">Coordenador</label>
									<select id="selectCoordenador" name="coordenador" class="form-control">
										<option value="" selected="selected">Selecionar coordenador...</option>
										<option th:each="coordenador : ${coordenadores}" th:value="${coordenador.pessoa.id}" th:text="${coordenador.pessoa.nome}"></option>
									</select>
								</div>
								<div class="form-group col-sm-3">
									<label class="control-label">Modalidade</label>
									<select id="modalidadeSelect" name="modalidade" class="form-control">
										<option value="" selected="selected">Selecionar...</option>
										<option th:each="modalidade : ${modalidades}" th:value="${modalidade}" th:text="${modalidade.descricao}"></option>
									</select>
								</div>
								<div class="form-group col-sm-2">
									<label>Estado</label>
									<select id="estadoSelect" name="estado" class="form-control">
										<option value="" selected="selected">Selecionar...</option>
										<option th:value="true" >EM ANDAMENTO</option>
										<option th:value="false" >ENCERRADA</option>
									</select>
								</div>
								<div class="form-group col-sm-2">
									<label class="control-label">Ano</label>
									<input id="anoAcao" name="ano" class="form-control" type="number" min="2010" max="2050"/>
								</div>
								<div class="box-footer">
									<button type="submit" class="btn btn-success btn-flat pull-right">Buscar</button>
								</div>
							</form>
						</div>
						
						<div class="box-header with-border">
							<h3 class="box-title">Buscar Ações por Curso</h3>
						</div>
						<div class="box-body">
							<form th:action="@{/buscar/acao-extensao}" role="form" method="get">
								<div class="form-group col-sm-5">
									<label>Curso</label>
									<select id="cursoSelect" name="curso" class="form-control">
										<option value="" selected="selected">Selecionar...</option>
										<option th:each="curso : ${cursos}" th:value="${curso}" th:text="${curso.descricao}"></option>
									</select>
								</div>
								<div class="form-group col-sm-2">
									<label class="control-label">Ano</label>
									<input id="anoAcaoCurso" name="ano" class="form-control" type="number" min="2010" max="2050"/>
								</div>
								<div class="box-footer">
									<button type="submit" class="btn btn-success btn-flat pull-right">Buscar</button>
								</div>
							</form>
						</div>
						<div class="box-body table-responsive">
							<div data-toogle="tootip" title="Campos pesquisados" class="box-header with-border">
								<div th:if="${coordenador}" class="col-md-3">
									<label>Coordenador:</label>
									<p th:text="${coordenador}"></p>
								</div>
								<div th:if="${modalidade}" class="col-md-2">
									<label>Modalidade:</label>
									<p th:text="${modalidade}"></p>
								</div>
								<div th:if="${estado}" class="col-md-2">
									<label>Estado:</label>
									<p th:text="${estado}"></p>
								</div>
								<div th:if="${ano}" class="col-md-2">
									<label>Ano:</label>
									<p th:text="${ano}"></p>
								</div>
								<div th:if="${curso}" class="col-md-2">
									<label>Curso:</label>
									<p th:text="${curso}"></p>
								</div>
							</div>
							<div class="box-header with-border">
								<h3 class="box-title">Ações </h3>
							</div>
							<table id="tableAcoes" class="table table-striped table-bordered">
								<thead>
									<tr>
										<th>ID</th>
										<th>Título</th>
										<th>Coordenador</th>
										<th>Modalidade</th>
										<th>Período</th>
										<th>Estado</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="acao: ${acoes}">
										<td th:text="${acao.identificador}"></td>
										<td> <a th:href="@{/detalhes/} + ${acao.id}" title="Detalhes da ação" th:text="${acao.titulo}"></a> </td>
										<td th:text="${acao.coordenador.nome}"></td>
										<td th:text="${acao.modalidade.descricao}"></td>
										<td th:text="${#dates.format(acao.inicio, 'dd/MM/yyyy')} + ' à ' + ${#dates.format(acao.termino, 'dd/MM/yyyy')}"></td>
										<td><label th:text="${acao.ativo} ? 'EM ANDAMENTO': 'ENCERRADA'" class="label label-primary"></label></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
			</section>
		</div>
		<footer th:replace="modulos/fragments :: footer"></footer>
	</div>
</body>
</html>
